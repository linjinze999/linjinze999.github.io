(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{296:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[s._m(0),s._m(1),s._m(2),s._m(3),s._m(4),s._m(5),s._m(6),s._m(7),s._m(8),s._m(9),a("p",[s._v("你可以在以下网址查看所有gerrit版本："),a("a",{attrs:{href:"https://gerrit-releases.storage.googleapis.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gerrit-releases.storage.googleapis.com/"),a("OutboundLink")],1)]),s._m(10),s._m(11),a("p",[a("code",[s._v("gerrit-2.14.9.war")]),s._v("下载地址为："),a("a",{attrs:{href:"https://gerrit-releases.storage.googleapis.com/gerrit-2.14.9.war",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gerrit-releases.storage.googleapis.com/gerrit-2.14.9.war"),a("OutboundLink")],1)]),s._m(12),a("p",[s._v("进入官网下载："),a("a",{attrs:{href:"https://www.gerritcodereview.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.gerritcodereview.com/"),a("OutboundLink")],1)]),s._m(13),s._m(14),s._m(15),a("p",[s._v("若使用系统默认的h2数据库，则无需安装。这里我们改为使用mysql数据库，因此需要安装mysql服务。")]),s._m(16),a("p",[s._v("安装完以后，进入mysql创建gerrit数据库：")]),s._m(17),s._m(18),s._m(19),s._m(20),a("p",[s._v("按照提示输入初始化参数：")]),s._m(21),s._m(22),s._m(23),s._m(24),a("p",[s._v("配置文件参数，请参考 "),a("router-link",{attrs:{to:"./deploy.html"}},[s._v("配置文件")]),s._v("。可以自己手动修改配置，然后重启系统：")],1),s._m(25),s._m(26),a("p",[s._v("可见：【你的系统】->【Documentation】->【Table of Contents】->【\nReverse Proxy】，或网上"),a("a",{attrs:{href:"http://gerrit.aokp.co/Documentation/config-reverseproxy.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("别人的系统文档"),a("OutboundLink")],1)]),s._m(27),s._m(28),s._m(29),s._m(30),s._m(31),s._m(32),s._m(33),s._m(34),s._m(35),s._m(36),s._m(37),s._m(38),s._m(39),s._m(40),a("p",[s._v("配置如下：")]),s._m(41)])},[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"系统部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统部署","aria-hidden":"true"}},[this._v("#")]),this._v(" 系统部署")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("注意事项")]),t("p",[this._v("操作系统： Linux。 请提前更新镜像源："),t("code",[this._v("sudo apt-get update")]),this._v("。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"安装环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装环境")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("可通过"),t("code",[this._v("apt-get")]),this._v("命令安装所有软件：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" oracle-java8-install "),a("span",{attrs:{class:"token function"}},[s._v("curl")]),s._v(" dirmngr "),a("span",{attrs:{class:"token function"}},[s._v("git")]),s._v(" gitweb gnupg libcgi-pm-perl netcat procmail openssh-client "),a("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("创建gerrit用户（默认创建"),t("code",[this._v("/home/gerrit")]),this._v("用户目录）")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[this._v("sudo")]),this._v(" adduser gerrit \n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"下载war包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载war包","aria-hidden":"true"}},[this._v("#")]),this._v(" 下载war包")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("将下载的war包拷贝至"),t("code",[this._v("/home/gerrit/gerrit-x.xx.xx.war")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"国内下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#国内下载","aria-hidden":"true"}},[this._v("#")]),this._v(" 国内下载")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("（"),t("strong",[this._v("注意")]),this._v("：打开是一个xml）")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("选择你要下载的版本，在网址后添加"),t("code",[this._v("gerrit-${GERRIT_VERSION}.war")]),this._v("即可下载，如：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"官网下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官网下载","aria-hidden":"true"}},[this._v("#")]),this._v(" 官网下载")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("注意")]),t("p",[this._v("官网是外国网站，需要翻墙才能访问。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"安装系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装系统","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装系统")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"安装数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装数据库","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装数据库")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-server\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-client\n"),a("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" libmysqlclient-dev\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# mysql -uroot -p\nmysql> CREATE USER 'gerrit2'@'localhost' IDENTIFIED BY 'password';\nmysql> CREATE DATABASE reviewdb DEFAULT CHARACTER SET 'utf8';\nmysql> GRANT ALL ON reviewdb.* TO 'gerrit2'@'localhost';\nmysql> FLUSH PRIVILEGES;\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br"),t("span",{staticClass:"line-number"},[this._v("3")]),t("br"),t("span",{staticClass:"line-number"},[this._v("4")]),t("br"),t("span",{staticClass:"line-number"},[this._v("5")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"安装系统-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装系统-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装系统")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("java -jar /home/gerrit/gerrit-2.14.9.war init -d /home/gerrit/review_site\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("提示")]),t("p",[this._v("以上初始化方式需自己指定配置，若想使用默认配置，则可以加入"),t("code",[this._v("--batch")]),this._v("参数，如：")]),t("p",[t("code",[this._v("java -jar /home/gerrit/gerrit-2.14.9.war init --batch -d /home/gerrit/review_site")])])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-bash line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("*** Gerrit Code Review 2.14.9\n*** \n\nCreate "),a("span",{attrs:{class:"token string"}},[s._v("'/home/gerrit/review_site'")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? （找不到初始化目录，询问是否创建，直接回车确认即可）\n\n*** Git Repositories\n*** \n\nLocation of Git repositories   "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("git"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （本地git目录地址，直接回车确认即可）\n\n*** SQL Database\n*** \n\nDatabase server "),a("span",{attrs:{class:"token function"}},[s._v("type")]),s._v("           "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("h2"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": mysql（指定数据库，默认为h2，改为mysql）\n\nGerrit Code Review is not shipped with MySQL Connector/J 5.1.41\n**  This library is required "),a("span",{attrs:{class:"token keyword"}},[s._v("for")]),s._v(" your configuration. **\nDownload and "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" it now "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y（下载mysql数据库驱动，选择是；\n也可以选择否，后续自己下载对应版本的jdbc驱动拷贝至【review_site/lib】目录下，\n下载地址：http://central.maven.org/maven2/mysql/mysql-connector-java）\nServer "),a("span",{attrs:{class:"token function"}},[s._v("hostname")]),s._v("                "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （mysql地址，直接回车确认即可）\nServer port                    "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mysql default"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （mysql端口，直接回车确认即可）\nDatabase name                  "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("reviewdb"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （数据库名，直接回车确认即可）\nDatabase username              "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxxxxx"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": gerrit（数据库用户名，改为：gerrit）\ngerrit's password              "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" （输入数据库密码）\n              confirm password "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" （重复输入数据库密码）\n\n*** Index\n*** \n\nType                           "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("lucene/?"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （索引类型，直接回车确认即可）\n\n*** User Authentication\n*** \n\nAuthentication method          "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("openid/?"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （登录类型，直接回车确认即可）\nEnable signed push support     "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? （直接回车确认即可）\n\n*** Review Labels\n*** \n\nInstall Verified label         "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? （直接回车确认即可）\n\n*** Email Delivery\n*** \n\nSMTP server "),a("span",{attrs:{class:"token function"}},[s._v("hostname")]),s._v("           "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("localhost"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （邮箱信息，直接回车确认即可）\nSMTP server port               "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\nSMTP encryption                "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("none/?"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\nSMTP username                  "),a("span",{attrs:{class:"token keyword"}},[s._v(":")]),s._v(" \n\n*** Container Process\n*** \n\nRun as                         "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxxx"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": gerrit （以gerrit用户运行）\nJava runtime                   "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/usr/lib/jvm/java-8-oracle/jre"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （java_home，直接回车确认即可）\nCopy gerrit-2.14.9.war to /home/gerrit/review_site/bin/gerrit.war "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? （直接回车确认即可）\nCopying gerrit-2.14.9.war to /home/gerrit/review_site2/bin/gerrit.war\n\n*** SSH Daemon\n*** \n\nListen on address              "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\nListen on port                 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("29418"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\nGenerating SSH host key "),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". rsa"),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". dsa"),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ed25519"),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ecdsa 256"),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ecdsa 384"),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". ecdsa 521"),a("span",{attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n*** HTTP Daemon\n*** \n\nBehind reverse proxy           "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? （直接回车确认即可）\nUse SSL "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("https://"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("             "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? （直接回车确认即可）\nListen on address              "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\nListen on port                 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("8080"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\nCanonical URL                  "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("http://ubuntu:8080/"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": （直接回车确认即可）\n\n*** Cache\n*** \n\n\n*** Plugins\n*** \n\nInstalling plugins.\n（是否安装插件，选择：【y】，这些插件是系统必需的）\nInstall plugin commit-message-length-validator version v2.14.9 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\nInstall plugin download-commands version v2.14.9 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\nInstall plugin hooks version v2.14.9 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\nInstall plugin replication version v2.14.9 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\nInstall plugin reviewnotes version v2.14.9 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\nInstall plugin singleusergroup version v2.14.9 "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\nInitializing plugins.\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"danger custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("错误")]),t("p",[this._v("若初始化出现问题，可以重复执行"),t("code",[this._v("init")]),this._v("命令，重新配置。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("初始化后，"),t("code",[this._v("/home/gerrit/review_site/etc/gerrit.config")]),this._v("配置如下：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-hjson line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[gerrit]\n\tbasePath = git\n\tserverId = dbd2d673-51c7-4542-8e88-5f28c0537589\n\tcanonicalWebUrl = http://localhost:8080/\n[database]\n\ttype = mysql\n\thostname = localhost\n\tdatabase = reviewdb\n\tusername = gerrit\n[download]\n        scheme = ssh\n[index]\n\ttype = LUCENE\n[auth]\n\ttype = OPENID\n#   用户登录方式，调试时可以修改为以下配置，线上不可使用\n#   type = development_become_any_account\n[receive]\n\tenableSignedPush = false\n[sendemail]\n\tsmtpServer = localhost\n[container]\n\tuser = gerrit\n\tjavaHome = /usr/lib/jvm/java-8-oracle/jre\n[sshd]\n\tlistenAddress = *:29418\n[httpd]\n\tlistenUrl = http://*:8080/\n[cache]\n\tdirectory = cache\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("/home/gerrit/review_site/bin/gerrit.sh restart\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"域名配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 域名配置")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("strong",[this._v("1. Gerrit配置")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("配置文件 "),t("code",[this._v("$site_path'/etc/gerrit.config")]),this._v(" 修改以下配置：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("[gerrit]\n        canonicalWebUrl = http://www.example.com/gerrit/\n[httpd]\n        listenUrl = proxy-http://*:8080/gerrit/\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br"),t("span",{staticClass:"line-number"},[this._v("3")]),t("br"),t("span",{staticClass:"line-number"},[this._v("4")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("之后重启系统："),t("code",[this._v("$site_path'/bin/gerrit.sh restart")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("strong",[this._v("2. 代理配置")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"a-apache2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-apache2","aria-hidden":"true"}},[this._v("#")]),this._v(" a) Apache2")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("提示")]),t("p",[this._v("添加配置前，请安装Apache2:"),t("code",[this._v("sudo apt-get install apache2")]),this._v("。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("执行以下命令，确保所需模块被开启：")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("sudo a2enmod proxy_http\nsudo a2enmod ssl # 可选，使用 HTTPS / SSL 时必需\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("修改配置文件"),t("code",[this._v("/etc/apache2/sites-available/000-default.conf")]),this._v("，添加端口转发（以下加黑部分）：")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language- line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<VirtualHost *:80>\n    # ... default settings ...\n\n    # Add gerrit proxy\n\tServerName www.example.com\n\n    ProxyRequests Off\n    ProxyVia Off\n    ProxyPreserveHost On\n\n    <Proxy *>\n      Order deny,allow\n      Allow from all\n    </Proxy>\n\n    AllowEncodedSlashes On\n    ProxyPass /gerrit/ http://127.0.0.1:8080/gerrit/ nocanon\n</VirtualHost>\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("重启apache2："),t("code",[this._v("sudo service apache2 restart")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("之后访问网站+"),t("code",[this._v("/gerrit/")]),this._v("即可进入系统，如："),t("code",[this._v("www.example.com/gerrit/")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"b-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" b) Nginx")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language- line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server {\n  listen 80;\n  server_name review.example.com;\n\n  location /gerrit/ {\n    proxy_pass        http://127.0.0.1:8081;\n    proxy_set_header  X-Forwarded-For $remote_addr;\n    proxy_set_header  Host $host;\n  }\n}\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])}],!1,null,null,null);t.default=e.exports}}]);