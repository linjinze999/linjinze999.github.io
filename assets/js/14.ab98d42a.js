(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{291:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"pygerrit"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pygerrit","aria-hidden":"true"}},[s._v("#")]),s._v(" pygerrit")]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),n("p",[s._v("开发环境：python2.7， "),n("code",[s._v("sudo pip install pygerrit")])])]),n("h2",{attrs:{id:"说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#说明","aria-hidden":"true"}},[s._v("#")]),s._v(" 说明")]),n("ol",[n("li",[s._v("修改config的用户、密码、gerrit地址，其中密码为系统个人设置中生成的http_password。")]),n("li",[s._v("封装了几个简单的常用的查看、创建项目、分支函数。")]),n("li",[s._v("注意在请求时，项目或分支中的"),n("code",[s._v("/")]),s._v("要替换为"),n("code",[s._v("%2F")]),s._v("。")])]),n("h2",{attrs:{id:"代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码","aria-hidden":"true"}},[s._v("#")]),s._v(" 代码")]),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("# -*- coding:utf-8 -*-")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" requests"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth "),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" HTTPBasicAuth\n"),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pygerrit"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest "),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GerritRestAPI\n\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Gerrit")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("__init__")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        config "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token string"}},[s._v('"auth_name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"xxxxxxxx"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),n("span",{attrs:{class:"token string"}},[s._v('"auth_password"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),n("span",{attrs:{class:"token string"}},[s._v('"web_url"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"http://localhost:8080/gerrit"')]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        auth "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" HTTPBasicAuth"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"auth_name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" config"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"auth_password"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        rest "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" GerritRestAPI"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("config"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"web_url"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" auth"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("auth"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" rest\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("get_project")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{attrs:{class:"token triple-quoted-string string"}},[s._v('\'\'\'\n        获取项目信息\n        https://gerrit.wikimedia.org/r/Documentation/rest-api-projects.html#get-project\n        :param project_name: 项目名，如"demo/test"\n        :return:\n        1. 项目存在：\n         {\n            "id": "plugins%2Freplication",\n            "name": "plugins/replication",\n            "parent": "Public-Plugins",\n            "description": "Copies to other servers using the Git protocol",\n            "state": "ACTIVE"\n         }\n         2. 项目不存在：None\n        \'\'\'')]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/projects/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("get_branch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" branch_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{attrs:{class:"token triple-quoted-string string"}},[s._v('\'\'\'\n        获取项目的分支信息\n        https://gerrit.wikimedia.org/r/Documentation/rest-api-projects.html#get-branch\n        :param project_name:项目名，如"demo/test"\n        :param branch_name:分支名，如"public/master"\n        :return:\n        1. 项目和分支都存在：\n        {\n            "ref": "refs/heads/public/master",\n            "revision": "67eb453396383c6777035edferwed664009e2aa5c"\n        }\n        2. 项目或分支不存在：None\n        \'\'\'')]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/projects/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"/branches/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                                 branch_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("get_tag")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tag_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{attrs:{class:"token triple-quoted-string string"}},[s._v('\'\'\'\n        获取项目的tag信息\n        https://gerrit.wikimedia.org/r/Documentation/rest-api-projects.html#get-tag\n        :param project_name:项目名，如"demo/test"\n        :param tag_name:tag名，如"V1.10"\n        :return:\n        1. 项目和tag都存在：\n        {\n            "ref": "refs/tags/v1.0",\n            "revision": "49ce77fdcfd339843rt5wertfwe325fd52d666",\n            "object": "1624f5af8ae89rfewrtw4trtwe413e3dcf30",\n            "message": "Annotated tag",\n            "tagger": {\n              "name": "David Pursehouse",\n              "email": "david.pursehouse@sonymobile.com",\n              "date": "2014-10-06 07:35:03.000000000",\n              "tz": 540\n            }\n        }\n        2. 项目或tag不存在：None\n        \'\'\'')]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/projects/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"/tags/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                                 tag_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("create_project")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" description"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" branches"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{attrs:{class:"token triple-quoted-string string"}},[s._v('\'\'\'\n        自动创建项目\n        https://gerrit.wikimedia.org/r/Documentation/rest-api-projects.html#create-project\n        :param project_name:项目名，如"demo/test"\n        :param description: 项目描述，如"用于自动创建项目测试"\n        :param branches: 初始分支名列表，如["master", "dev"]\n        :return: {\n            name: name\n            success: True/ False\n            reponse: {\n                "description": "用于自动创建项目测试",\n                "state": "ACTIVE",\n                "id": "mytest%2Fhello",\n                "parent": "All-Projects",\n                "name": "mytest/hello"\n            }\n        }\n        \'\'\'')]),s._v("\n        result "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token string"}},[s._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{attrs:{class:"token comment"}},[s._v("# 处理带空格异常")]),s._v("\n        new_branches "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("for")]),s._v(" branch "),n("span",{attrs:{class:"token keyword"}},[s._v("in")]),s._v(" branches"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            new_branches"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("append"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("branch"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('" "')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('""')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        project_name "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('" "')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('""')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token comment"}},[s._v("# 发送建项目请求")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"response"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/projects/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                               json"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                                                   "),n("span",{attrs:{class:"token string"}},[s._v('"description"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" description"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                                   "),n("span",{attrs:{class:"token string"}},[s._v('"submit_type"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"REBASE_IF_NECESSARY"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                                   "),n("span",{attrs:{class:"token string"}},[s._v('"create_empty_commit"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("True")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                                   "),n("span",{attrs:{class:"token string"}},[s._v('"branches"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" new_branches\n                                               "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"success"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"success"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"response"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token builtin"}},[s._v("str")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("create_branch_by_commit_id")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" branch_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" commit_id"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{attrs:{class:"token triple-quoted-string string"}},[s._v('\'\'\'\n        根据某commit_id自动创建新分支\n        https://gerrit.wikimedia.org/r/Documentation/rest-api-projects.html#create-branch\n        :param project_name: 项目名，如"demo/test"\n        :param branch_name: 新分支名，如"develop"\n        :param commit_id: 基于什么commit_id创建新分支，如"816df193cewrq4rt21340d6173a35a035ae544f"\n        :return: {\n            "name":"demo/test",\n            "branch_name":"develop",\n            "success" : True/ False,\n            "commit_id": "816df193cewrq4rt21340d6173a35a035ae544f",\n            "response":{\n                "ref": "refs/heads/develop",\n                "can_delete": true,\n                "revision": "816df193cewrq4rt21340d6173a35a035ae544f"\n            }\n        }\n        \'\'\'')]),s._v("\n        "),n("span",{attrs:{class:"token comment"}},[s._v("# 处理带空格异常")]),s._v("\n        branch_name "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" branch_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('" "')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('""')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        project_name "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('" "')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('""')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        result "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token string"}},[s._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"branch_name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" branch_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"commit_id"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" commit_id"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{attrs:{class:"token comment"}},[s._v("# 发送建分支请求")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"response"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" self"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),n("span",{attrs:{class:"token string"}},[s._v('"/projects/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" project_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"/branches/"')]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                branch_name"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("replace"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"%2F"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" json"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token string"}},[s._v('"revision"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" commit_id"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"success"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"success"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n            result"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v('"response"')]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token builtin"}},[s._v("str")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result\n\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br"),n("span",{staticClass:"line-number"},[s._v("146")]),n("br"),n("span",{staticClass:"line-number"},[s._v("147")]),n("br"),n("span",{staticClass:"line-number"},[s._v("148")]),n("br"),n("span",{staticClass:"line-number"},[s._v("149")]),n("br"),n("span",{staticClass:"line-number"},[s._v("150")]),n("br"),n("span",{staticClass:"line-number"},[s._v("151")]),n("br"),n("span",{staticClass:"line-number"},[s._v("152")]),n("br"),n("span",{staticClass:"line-number"},[s._v("153")]),n("br"),n("span",{staticClass:"line-number"},[s._v("154")]),n("br"),n("span",{staticClass:"line-number"},[s._v("155")]),n("br"),n("span",{staticClass:"line-number"},[s._v("156")]),n("br"),n("span",{staticClass:"line-number"},[s._v("157")]),n("br"),n("span",{staticClass:"line-number"},[s._v("158")]),n("br"),n("span",{staticClass:"line-number"},[s._v("159")]),n("br")])])])}],!1,null,null,null);t.default=e.exports}}]);