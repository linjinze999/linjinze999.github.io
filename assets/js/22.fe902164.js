(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{304:function(t,e,r){"use strict";r.r(e);var a=r(0),s=Object(a.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),r("p",[t._v("本章节介绍如何优化一个Vue项目。")]),t._m(1),r("p",[t._v("Webpack4在生产环境下的打包，提供了许多优化项：")]),t._m(2),r("p",[t._v("使用"),r("a",{attrs:{href:"https://www.webpackjs.com/plugins/extract-text-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ExtractTextWebpackPlugin"),r("OutboundLink")],1),t._v("分离css，使js和css并行加载，详情见"),r("a",{attrs:{href:"https://www.webpackjs.com/guides/asset-management/",target:"_blank",rel:"noopener noreferrer"}},[t._v("管理资源"),r("OutboundLink")],1),t._v("；")]),t._m(3),r("p",[t._v("使用"),r("a",{attrs:{href:"https://www.webpackjs.com/guides/tree-shaking/",target:"_blank",rel:"noopener noreferrer"}},[t._v("tree shaking"),r("OutboundLink")],1),t._v("删除无用代码；")]),t._m(4),r("p",[t._v("使用"),r("a",{attrs:{href:"https://www.webpackjs.com/plugins/split-chunks-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SplitChunksPlugin"),r("OutboundLink")],1),t._v("分离代码，可以分离vue官方源码从而使用官方的cdn，也可以结合【懒加载】或【缓存】使用；")]),t._m(5),r("p",[t._v("利用"),r("a",{attrs:{href:"https://www.webpackjs.com/guides/lazy-loading/",target:"_blank",rel:"noopener noreferrer"}},[t._v("懒加载"),r("OutboundLink")],1),t._v("，在需要的时候再加载所需资源，如"),r("a",{attrs:{href:"https://router.vuejs.org/zh/guide/advanced/lazy-loading.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由懒加载"),r("OutboundLink")],1),t._v("；")]),t._m(6),r("p",[t._v("借助"),r("a",{attrs:{href:"https://www.webpackjs.com/guides/caching/",target:"_blank",rel:"noopener noreferrer"}},[t._v("缓存相关技术"),r("OutboundLink")],1),t._v("，使代码分离后、没有代码变更的文件名字保持一致，再利用本地缓存加快速度；")]),t._m(7),r("p",[t._v("利用"),r("a",{attrs:{href:"https://www.webpackjs.com/plugins/compression-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CompressionWebpackPlugin"),r("OutboundLink")],1),t._v("，开启gzip压缩减少文件体积；")]),t._m(8),r("p",[t._v("当代码经过webpack转化后，调试将变得困难，使用SourceMap可以解决该问题，但也会增加代码量。webpack建议保留此配置。")]),t._m(9),t._m(10),r("p",[t._v("v-if是懒加载，当状态为true时才会加载，并且为false时不会占用布局空间；v-show是无论状态是true或者是false，都会进行渲染，并对布局占据空间对于在项目中，需要频繁调用，不需要权限的显示隐藏，可以选择使用v-show，可以减少系统的切换开销。")]),t._m(11),r("p",[t._v("在列表数据进行遍历渲染时，需要为每一项item设置唯一key值，方便vuejs内部机制精准找到该条列表数据。当state更新时，新的状态值和旧的状态值对比，较快地定位到diff。")]),t._m(12),r("p",[t._v("在项目开发过程之中，第一版本把所有的组件的布局写在一个组件中，当数据变更时，由于组件代码比较庞大，vuejs的数据驱动视图更新比较慢，造成渲染比较慢。造成比较差的体验效果。所以把组件细分，比如一个组件，可以把整个组件细分成轮播组件、列表组件、分页组件等。")]),t._m(13),r("p",[t._v("当组件某个数据变更后需要对应的state进行变更，就需要对另外的组件进行state进行变更。可以使用watch监听相应的数据变更并绑定事件。当watch的数据比较小，性能消耗不明显。当数据变大，系统会出现卡顿，所以减少watch的数据。其它不同的组件的state双向绑定，可以采用事件中央总线或者vuex进行数据的变更操作。")]),t._m(14),r("p",[t._v("对于内容类系统的图片按需加载，如果出现图片加载比较多，可以先使用v-lazy之类的懒加载库或者绑定鼠标的scroll事件，滚动到可视区域先再对数据进行加载显示，减少系统加载的数据。\n###6. keep-alive\n需要频繁切换的组件可以使用keep-alive保留在内存中。")]),t._m(15),t._m(16),r("p",[t._v("在首屏加载资源较多的情况下，可能会出现白屏和闪屏，体验不好。可以在首屏资源数据还没有加载完成时显示加载图，给到很好的体验效果。详情见"),r("a",{attrs:{href:"https://www.cnblogs.com/xiaoxiaossrs/p/9936516.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue页面显示骨架屏"),r("OutboundLink")],1),t._v("。")]),t._m(17),r("p",[t._v("页面跳转有时会需要一点时间，而这点时间若是页面毫无响应，体验会较差。可以利用nprogress，在跳转期间在页面顶端生成一个小进度条，模拟加载状态。详情见"),r("a",{attrs:{href:"https://blog.csdn.net/wn1245343496/article/details/82151273",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue使用NProgress"),r("OutboundLink")],1),t._v("。")]),t._m(18),r("p",[t._v("每次请求或加载都应该显示一个加载效果（常见的菊花图），避免用户操作看起来无响应，这部分大多人都知道，不再多述。")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 性能优化")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"打包优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 打包优化")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-资源分离"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-资源分离","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 资源分离")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-tree-shaking"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-tree-shaking","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. Tree shaking")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-代码分离"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码分离","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 代码分离")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_4-懒加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-懒加载","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 懒加载")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-缓存","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 缓存")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_6-压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-压缩","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. 压缩")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_7-sourcemap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-sourcemap","aria-hidden":"true"}},[this._v("#")]),this._v(" 7. SourceMap")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"源码优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#源码优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 源码优化")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-v-if-和-v-show选择调用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-v-if-和-v-show选择调用","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. v-if 和 v-show选择调用")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-为item设置唯一key值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-为item设置唯一key值","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 为item设置唯一key值")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-细分vuejs组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-细分vuejs组件","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 细分vuejs组件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_4-减少watch的数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-减少watch的数据","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 减少watch的数据")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5-内容类系统的图片资源按需加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-内容类系统的图片资源按需加载","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 内容类系统的图片资源按需加载")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"体验优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#体验优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 体验优化")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-首屏加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-首屏加载","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 首屏加载")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-页面跳转"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-页面跳转","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 页面跳转")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3-加载动效"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-加载动效","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 加载动效")])}],!1,null,null,null);e.default=s.exports}}]);