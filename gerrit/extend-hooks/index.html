<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gerrit Code Review - Hooks | 林锦泽的个人博客</title>
    <meta name="description" content="">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <script src="/assets/js/article.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.5a5b4bf9.css" as="style"><link rel="preload" href="/assets/js/app.6684e293.js" as="script"><link rel="preload" href="/assets/js/13.09bd8568.js" as="script"><link rel="prefetch" href="/assets/js/11.eef83efc.js"><link rel="prefetch" href="/assets/js/1.ed08d72e.js"><link rel="prefetch" href="/assets/js/3.9793400d.js"><link rel="prefetch" href="/assets/js/4.615874cf.js"><link rel="prefetch" href="/assets/js/5.03ea8fd0.js"><link rel="prefetch" href="/assets/js/6.954e6320.js"><link rel="prefetch" href="/assets/js/7.580f295f.js"><link rel="prefetch" href="/assets/js/8.06959a65.js"><link rel="prefetch" href="/assets/js/9.62a40464.js"><link rel="prefetch" href="/assets/js/10.d1f5e796.js"><link rel="prefetch" href="/assets/js/12.499fc7e6.js"><link rel="prefetch" href="/assets/js/14.ab98d42a.js"><link rel="prefetch" href="/assets/js/15.a1eadf2a.js"><link rel="prefetch" href="/assets/js/16.9afdb1ca.js"><link rel="prefetch" href="/assets/js/17.21c8fcc7.js"><link rel="prefetch" href="/assets/js/18.6486cbac.js"><link rel="prefetch" href="/assets/js/19.05c41371.js"><link rel="prefetch" href="/assets/js/20.d57f5c12.js"><link rel="prefetch" href="/assets/js/21.95213b4b.js"><link rel="prefetch" href="/assets/js/22.fe902164.js"><link rel="prefetch" href="/assets/js/23.c8c1babf.js"><link rel="prefetch" href="/assets/js/24.f7f4f4b1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5a5b4bf9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      林锦泽的个人博客
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="https://linjinze999.github.io/uni/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Uni组件库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/gerrit/" class="nav-link router-link-active">Gerrit运维</a></div><div class="nav-item"><a href="https://linjinze999.github.io/vue-llplatform/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-llplatform
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习资料</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/learning/javascript/" class="nav-link">Javascript</a></li><li class="dropdown-item"><!----><a href="/learning/vue/" class="nav-link">Vue</a></li></ul></div></div><a href="https://github.com/linjinze999" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://linjinze999.github.io/uni/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Uni组件库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/gerrit/" class="nav-link router-link-active">Gerrit运维</a></div><div class="nav-item"><a href="https://linjinze999.github.io/vue-llplatform/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-llplatform
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习资料</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/learning/javascript/" class="nav-link">Javascript</a></li><li class="dropdown-item"><!----><a href="/learning/vue/" class="nav-link">Vue</a></li></ul></div></div><a href="https://github.com/linjinze999" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Gerrit Code Review - Hooks</span><!----></p><ul class="sidebar-group-items"><li><a href="/gerrit/extend-hooks/#supported-hooks" class="sidebar-link">Supported Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#ref-update" class="sidebar-link">ref-update</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#patchset-created" class="sidebar-link">patchset-created</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#draft-published" class="sidebar-link">draft-published</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#comment-added" class="sidebar-link">comment-added</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#change-merged" class="sidebar-link">change-merged</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#merge-failed" class="sidebar-link">merge-failed</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#change-abandoned" class="sidebar-link">change-abandoned</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#change-restored" class="sidebar-link">change-restored</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#ref-updated" class="sidebar-link">ref-updated</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#reviewer-added" class="sidebar-link">reviewer-added</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#topic-changed" class="sidebar-link">topic-changed</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hashtags-changed" class="sidebar-link">hashtags-changed</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#cla-signed" class="sidebar-link">cla-signed</a></li></ul></li><li><a href="/gerrit/extend-hooks/#configuration-settings" class="sidebar-link">Configuration Settings</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/gerrit/extend-hooks/#section-hooks" class="sidebar-link">Section Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-path" class="sidebar-link">hooks.path</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-synchooktimeout" class="sidebar-link">hooks.syncHookTimeout</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-changeabandonedhook" class="sidebar-link">hooks.changeAbandonedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-changemergedhook" class="sidebar-link">hooks.changeMergedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-changerestoredhook" class="sidebar-link">hooks.changeRestoredHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-clasignedhook" class="sidebar-link">hooks.claSignedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-commentaddedhook" class="sidebar-link">hooks.commentAddedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-draftpublishedhook" class="sidebar-link">hooks.draftPublishedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-hashtagschangedhook" class="sidebar-link">hooks.hashtagsChangedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-mergefailedhook" class="sidebar-link">hooks.mergeFailedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-patchsetcreatedhook" class="sidebar-link">hooks.patchsetCreatedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-refupdatehook" class="sidebar-link">hooks.refUpdateHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-refupdatedhook" class="sidebar-link">hooks.refUpdatedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-revieweraddedhook" class="sidebar-link">hooks.reviewerAddedHook</a></li><li class="sidebar-sub-header"><a href="/gerrit/extend-hooks/#hooks-topicchangedhook" class="sidebar-link">hooks.topicChangedHook</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="gerrit-code-review-hooks"><a href="#gerrit-code-review-hooks" aria-hidden="true" class="header-anchor">#</a> Gerrit Code Review - Hooks</h1><h4 id="version-v2-11-5"><a href="#version-v2-11-5" aria-hidden="true" class="header-anchor">#</a> version v2.11.5</h4><h4 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true" class="header-anchor">#</a> Table of Contents</h4><p></p><div class="table-of-contents"><ul><li><a href="#supported-hooks">Supported Hooks</a><ul><li><a href="#ref-update">ref-update</a></li><li><a href="#patchset-created">patchset-created</a></li><li><a href="#draft-published">draft-published</a></li><li><a href="#comment-added">comment-added</a></li><li><a href="#change-merged">change-merged</a></li><li><a href="#merge-failed">merge-failed</a></li><li><a href="#change-abandoned">change-abandoned</a></li><li><a href="#change-restored">change-restored</a></li><li><a href="#ref-updated">ref-updated</a></li><li><a href="#reviewer-added">reviewer-added</a></li><li><a href="#topic-changed">topic-changed</a></li><li><a href="#hashtags-changed">hashtags-changed</a></li><li><a href="#cla-signed">cla-signed</a></li></ul></li><li><a href="#configuration-settings">Configuration Settings</a></li><li><a href="#section-hooks">Section Hooks</a><ul><li><a href="#hooks-path">hooks.path</a></li><li><a href="#hooks-synchooktimeout">hooks.syncHookTimeout</a></li><li><a href="#hooks-changeabandonedhook">hooks.changeAbandonedHook</a></li><li><a href="#hooks-changemergedhook">hooks.changeMergedHook</a></li><li><a href="#hooks-changerestoredhook">hooks.changeRestoredHook</a></li><li><a href="#hooks-clasignedhook">hooks.claSignedHook</a></li><li><a href="#hooks-commentaddedhook">hooks.commentAddedHook</a></li><li><a href="#hooks-draftpublishedhook">hooks.draftPublishedHook</a></li><li><a href="#hooks-hashtagschangedhook">hooks.hashtagsChangedHook</a></li><li><a href="#hooks-mergefailedhook">hooks.mergeFailedHook</a></li><li><a href="#hooks-patchsetcreatedhook">hooks.patchsetCreatedHook</a></li><li><a href="#hooks-refupdatehook">hooks.refUpdateHook</a></li><li><a href="#hooks-refupdatedhook">hooks.refUpdatedHook</a></li><li><a href="#hooks-revieweraddedhook">hooks.reviewerAddedHook</a></li><li><a href="#hooks-topicchangedhook">hooks.topicChangedHook</a></li></ul></li></ul></div><p></p><p>Gerrit does not run any of the standard git hooks in the repositories it works with, but it does have its own hook mechanism included. Gerrit looks in '$site_path'/hooks for executables with names listed below.</p><p>The environment will have GIT_DIR set to the full path of the affected git repository so that git commands can be easily run.</p><p>Make sure your hook scripts are executable if running on *nix.</p><p>With the exception of the ref-update hook, hooks are run in the background after the relevant change has taken place so are unable to affect the outcome of any given change. Because of the fact the hooks are run in the background after the activity, a hook might not be notified about an event if the server is shutdown before the hook can be invoked.</p><h2 id="supported-hooks"><a href="#supported-hooks" aria-hidden="true" class="header-anchor">#</a> Supported Hooks</h2><h3 id="ref-update"><a href="#ref-update" aria-hidden="true" class="header-anchor">#</a> ref-update</h3><p>This is called when a push request is received by Gerrit. It allows a push to be rejected before it is committed to the Gerrit repository. If the script exits with non-zero return code the push will be rejected. Any output from the script will be returned to the user, regardless of the return code.</p><p>This hook is called synchronously so it is recommended that it not block. A default timeout on the hook is set to 30 seconds to avoid &quot;runaway&quot; hooks using up server threads. See <a href>hooks.syncHookTimeout</a> for configuration details.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>ref-update --project &lt;project name&gt; --refname &lt;refname&gt; --uploader &lt;uploader&gt; --oldrev &lt;sha1&gt; --newrev &lt;sha1&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="patchset-created"><a href="#patchset-created" aria-hidden="true" class="header-anchor">#</a> patchset-created</h3><p>This is called whenever a patchset is created (this includes new changes and drafts).</p><div class="language- line-numbers-mode"><pre class="language-text"><code>patchset-created --change &lt;change id&gt; --is-draft &lt;boolean&gt; --kind &lt;change kind&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --uploader &lt;uploader&gt; --commit &lt;sha1&gt; --patchset &lt;patchset id&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="kind"><a href="#kind" aria-hidden="true" class="header-anchor">#</a> kind</h4><p>change kind represents the kind of change uploaded, also represented in <a href="https://gerrit.wikimedia.org/r/Documentation/json.html#patchSet" target="_blank" rel="noopener noreferrer">patchSet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><ul><li><p><strong>REWORK</strong>
Nontrivial content changes.</p></li><li><p><strong>TRIVIAL_REBASE</strong>
Conflict-free merge between the new parent and the prior patch set.</p></li><li><p><strong>NO_CODE_CHANGE</strong>
No code changed; same tree and same parent tree.</p></li><li><p><strong>NO_CHANGE</strong>
No changes; same commit message, same tree and same parent tree.</p></li></ul><h3 id="draft-published"><a href="#draft-published" aria-hidden="true" class="header-anchor">#</a> draft-published</h3><p>This is called whenever a draft change is published.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>draft-published --change &lt;change id&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --uploader &lt;uploader&gt; --commit &lt;sha1&gt; --patchset &lt;patchset id&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="comment-added"><a href="#comment-added" aria-hidden="true" class="header-anchor">#</a> comment-added</h3><p>This is called whenever a comment is added to a change.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>comment-added --change &lt;change id&gt; --is-draft &lt;boolean&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --author &lt;comment author&gt; --commit &lt;commit&gt; --comment &lt;comment&gt; [--&lt;approval category id&gt; &lt;score&gt; --&lt;approval category id&gt; &lt;score&gt; ...]
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="change-merged"><a href="#change-merged" aria-hidden="true" class="header-anchor">#</a> change-merged</h3><p>Called whenever a change has been merged.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>change-merged --change &lt;change id&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --submitter &lt;submitter&gt; --commit &lt;sha1&gt; --newrev &lt;sha1&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="merge-failed"><a href="#merge-failed" aria-hidden="true" class="header-anchor">#</a> merge-failed</h3><p>Called whenever a change has failed to merge.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>merge-failed --change &lt;change id&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --submitter &lt;submitter&gt; --commit &lt;sha1&gt; --reason &lt;reason&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="change-abandoned"><a href="#change-abandoned" aria-hidden="true" class="header-anchor">#</a> change-abandoned</h3><p>Called whenever a change has been abandoned.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>change-abandoned --change &lt;change id&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --abandoner &lt;abandoner&gt; --commit &lt;sha1&gt; --reason &lt;reason&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="change-restored"><a href="#change-restored" aria-hidden="true" class="header-anchor">#</a> change-restored</h3><p>Called whenever a change has been restored.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>change-restored --change &lt;change id&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --topic &lt;topic&gt; --restorer &lt;restorer&gt; --commit &lt;sha1&gt; --reason &lt;reason&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="ref-updated"><a href="#ref-updated" aria-hidden="true" class="header-anchor">#</a> ref-updated</h3><p>Called whenever a ref has been updated.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>ref-updated --oldrev &lt;old rev&gt; --newrev &lt;new rev&gt; --refname &lt;ref name&gt; --project &lt;project name&gt; --submitter &lt;submitter&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="reviewer-added"><a href="#reviewer-added" aria-hidden="true" class="header-anchor">#</a> reviewer-added</h3><p>Called whenever a reviewer is added to a change.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>reviewer-added --change &lt;change id&gt; --change-url &lt;change url&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --reviewer &lt;reviewer&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="topic-changed"><a href="#topic-changed" aria-hidden="true" class="header-anchor">#</a> topic-changed</h3><p>Called whenever a change’s topic is changed from the Web UI or via the REST API.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>topic-changed --change &lt;change id&gt; --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --changer &lt;changer&gt; --old-topic &lt;old topic&gt; --new-topic &lt;new topic&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="hashtags-changed"><a href="#hashtags-changed" aria-hidden="true" class="header-anchor">#</a> hashtags-changed</h3><p>Called whenever hashtags are added to or removed from a change from the Web UI or via the REST API.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>hashtags-changed --change &lt;change id&gt;  --change-owner &lt;change owner&gt; --project &lt;project name&gt; --branch &lt;branch&gt; --editor &lt;editor&gt; --added &lt;hashtag&gt; --removed &lt;hashtag&gt; --hashtag &lt;hashtag&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The <code>--added</code> parameter may be passed multiple times, once for each hashtag that was added to the change.</p><p>The <code>--removed</code> parameter may be passed multiple times, once for each hashtag that was removed from the change.</p><p>The <code>--hashtag</code> parameter may be passed multiple times, once for each hashtag remaining on the change after the add or remove operation has been performed.</p><h3 id="cla-signed"><a href="#cla-signed" aria-hidden="true" class="header-anchor">#</a> cla-signed</h3><p>Called whenever a user signs a contributor license agreement.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>cla-signed --submitter &lt;submitter&gt; --user-id &lt;user_id&gt; --cla-id &lt;cla_id&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="configuration-settings"><a href="#configuration-settings" aria-hidden="true" class="header-anchor">#</a> Configuration Settings</h2><p>It is possible to change where Gerrit looks for hooks, and what filenames it looks for, by adding a [hooks] section in gerrit.config.</p><p>Gerrit will use the value of hooks.path for the hooks directory.</p><p>For the hook filenames, Gerrit will use the values of hooks.patchsetCreatedHook, hooks.draftPublishedHook, hooks.commentAddedHook, hooks.changeMergedHook, hooks.changeAbandonedHook, hooks.changeRestoredHook, hooks.refUpdatedHook, hooks.refUpdateHook, hooks.reviewerAddedHook and hooks.claSignedHook.</p><h2 id="section-hooks"><a href="#section-hooks" aria-hidden="true" class="header-anchor">#</a> Section Hooks</h2><h3 id="hooks-path"><a href="#hooks-path" aria-hidden="true" class="header-anchor">#</a> hooks.path</h3><p>Optional path to hooks, if not specified then <code>'$site_path'/hooks</code> will be used.</p><h3 id="hooks-synchooktimeout"><a href="#hooks-synchooktimeout" aria-hidden="true" class="header-anchor">#</a> hooks.syncHookTimeout</h3><p>Optional timeout value in seconds for synchronous hooks, if not specified then <code>30</code> seconds will be used.</p><h3 id="hooks-changeabandonedhook"><a href="#hooks-changeabandonedhook" aria-hidden="true" class="header-anchor">#</a> hooks.changeAbandonedHook</h3><p>Optional filename for the change abandoned hook, if not specified then <code>change-abandoned</code> will be used.</p><h3 id="hooks-changemergedhook"><a href="#hooks-changemergedhook" aria-hidden="true" class="header-anchor">#</a> hooks.changeMergedHook</h3><p>Optional filename for the change merged hook, if not specified then <code>change-merged</code> will be used.</p><h3 id="hooks-changerestoredhook"><a href="#hooks-changerestoredhook" aria-hidden="true" class="header-anchor">#</a> hooks.changeRestoredHook</h3><p>Optional filename for the change restored hook, if not specified then <code>change-restored</code> will be used.</p><h3 id="hooks-clasignedhook"><a href="#hooks-clasignedhook" aria-hidden="true" class="header-anchor">#</a> hooks.claSignedHook</h3><p>Optional filename for the CLA signed hook, if not specified then <code>cla-signed</code> will be used.</p><h3 id="hooks-commentaddedhook"><a href="#hooks-commentaddedhook" aria-hidden="true" class="header-anchor">#</a> hooks.commentAddedHook</h3><p>Optional filename for the comment added hook, if not specified then <code>comment-added</code> will be used.</p><h3 id="hooks-draftpublishedhook"><a href="#hooks-draftpublishedhook" aria-hidden="true" class="header-anchor">#</a> hooks.draftPublishedHook</h3><p>Optional filename for the draft published hook, if not specified then <code>draft-published</code> will be used.</p><h3 id="hooks-hashtagschangedhook"><a href="#hooks-hashtagschangedhook" aria-hidden="true" class="header-anchor">#</a> hooks.hashtagsChangedHook</h3><p>Optional filename for the hashtags changed hook, if not specified then <code>hashtags-changed</code> will be used.</p><h3 id="hooks-mergefailedhook"><a href="#hooks-mergefailedhook" aria-hidden="true" class="header-anchor">#</a> hooks.mergeFailedHook</h3><p>Optional filename for the merge failed hook, if not specified then <code>merge-failed</code> will be used.</p><h3 id="hooks-patchsetcreatedhook"><a href="#hooks-patchsetcreatedhook" aria-hidden="true" class="header-anchor">#</a> hooks.patchsetCreatedHook</h3><p>Optional filename for the patchset created hook, if not specified then <code>patchset-created</code> will be used.</p><h3 id="hooks-refupdatehook"><a href="#hooks-refupdatehook" aria-hidden="true" class="header-anchor">#</a> hooks.refUpdateHook</h3><p>Optional filename for the ref update hook, if not specified then <code>ref-update</code> will be used.</p><h3 id="hooks-refupdatedhook"><a href="#hooks-refupdatedhook" aria-hidden="true" class="header-anchor">#</a> hooks.refUpdatedHook</h3><p>Optional filename for the ref updated hook, if not specified then <code>ref-updated</code>will be used.</p><h3 id="hooks-revieweraddedhook"><a href="#hooks-revieweraddedhook" aria-hidden="true" class="header-anchor">#</a> hooks.reviewerAddedHook</h3><p>Optional filename for the reviewer added hook, if not specified then <code>reviewer-added</code> will be used.</p><h3 id="hooks-topicchangedhook"><a href="#hooks-topicchangedhook" aria-hidden="true" class="header-anchor">#</a> hooks.topicChangedHook</h3><p>Optional filename for the topic changed hook, if not specified then <code>topic-changed</code> will be used.</p><h4 id="part-of-gerrit-code-review"><a href="#part-of-gerrit-code-review" aria-hidden="true" class="header-anchor">#</a> Part of Gerrit Code Review</h4><h4 id="version-v2-11-5-2"><a href="#version-v2-11-5-2" aria-hidden="true" class="header-anchor">#</a> Version v2.11.5</h4></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/linjinze999/blog-vuepress/edit/master/docs/gerrit/extend-hooks/README.md" target="_blank" rel="noopener noreferrer">帮我改进此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">上次更新: </span><span class="time">2018-7-28 01:01:37</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/gerrit/extend.html#hooks钩子" class="prev">
          扩展
        </a></span><!----></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/assets/js/13.09bd8568.js" defer></script><script src="/assets/js/app.6684e293.js" defer></script>
  </body>
</html>
